/*
MustafaMercan
 var _options = {
        screenBoxCount: { row: 4, col: 4 },
        lastClick: undefined,
        canvasId: "#game",
        coverImage: "cover_a.png",
        imageFolder: "game-Images",
        onAfterClick: undefined,
        onStartGame: undefined,
        onFinishGame: undefined,
        onAfterCheck: undefined,
        onSecondTimer:undefined

    }
    var game= new MemoryGame(_options);
    game.startGame()
    game.renderLayout()
    game.options//current options
    game.isFinishGame//true False

    _options.onAfterClick(cell, clickCount, score);
    _options.onAfterCheck(cell1, cell2, correct);
    _options.onSecondTimer(clickCount, score, (new Date() - startTime));
    _options.onFinishGame(clickCount, score, (stopTime - startTime));
    _options.onStartGame(startTime,_options);
*/
MemoryGame=function(n){var a=0,e=void 0,t=void 0,o=!1,r=0,c=void 0,l=void 0,d={screenBoxCount:{row:4,col:4},lastClick:void 0,canvasId:"#game",coverImage:"cover_a.png",imageFolder:"game-Images",onAfterClick:void 0,onStartGame:void 0,onFinishGame:void 0,onAfterCheck:void 0,onSecondTimer:void 0};null!=n&&$.extend(d,n);var s=function(){return d.screenBoxCount.row*d.screenBoxCount.col},f=function(){$(d.canvasId).html("");var n="",a=0;for(c=u(),row=0;row<d.screenBoxCount.row;row++){for(n+="<div class='row' >",col=0;col<d.screenBoxCount.col;col++)n+="<div class='cell' data-row="+row+" data-col="+col+" data-index="+a+" data-show=false data-correct=false><img class='front' src='"+d.imageFolder+"/"+d.coverImage+"'/><img class='back' src='"+c[a]+"' style='display:none;opacity: 0;' /></div>",a++;n+="</div>"}$(d.canvasId).html(n)},u=function(){var n=new Array(s());for(i=0;i<=n.length/2-1;i++)n[i]=d.imageFolder+"/"+(i+1)+".jpg",n[n.length-i-1]=n[i];return p(n)},v=function(n){n?$(d.canvasId).find(".cell").on("click",h.bind(this)):$(d.canvasId).find(".cell").off("click")},h=function(n){var e=$(n.delegateTarget),t=$(d.canvasId).find(".cell[data-show=true][data-correct=false]");0==t.length?(a++,w(e)):1==t.length&&0==t.find(e).length?(a++,w(e),k(t.eq(0),e)):t.length>1&&0==t.find(e).length&&(a++,m(!1),w(e)),null!=d.onAfterClick&&d.onAfterClick(e,a,r)},m=function(n){$(d.canvasId).find(".cell[data-show=true][data-correct="+n+"]").each(g)},g=function(n,a){$(a).attr("data-show",!1),$(a).attr("data-correct",!1),$(a).find(".front").show().animate({opacity:1}),$(a).find(".back").hide().animate({opacity:0})},w=function(n){n.attr("data-show",!0),n.find(".back").show().animate({opacity:1}),n.find(".front").hide().animate({opacity:0})},I=function(n){return parseInt(n.data("index"))},k=function(n,a){var e=c[I(n)]==c[I(a)];return e&&(n.attr("data-correct",!0),a.attr("data-correct",!0),r++),r>=s()/2&&C(),null!=d.onAfterCheck&&d.onAfterCheck(n,a,e),e},C=function(){v(!1),t=new Date,o=!0,clearInterval(l),null!=d.onFinishGame&&d.onFinishGame(a,r,t-e)},p=function(n){for(var a=n.length-1;a>0;a--){var e=Math.floor(Math.random()*Date.now())%a,t=n[a];n[a]=n[e],n[e]=t}return n};return{startGame:function(){f(),a=0,o=!1,r=0,v(!0),e=new Date,null!=d.onStartGame&&d.onStartGame(e,d),l=setInterval(function(){null!=d.onSecondTimer&&d.onSecondTimer(a,r,new Date-e)},1e3)},renderLayout:f,options:d,isFinishGame:o}};